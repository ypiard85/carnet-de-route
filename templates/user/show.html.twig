{% extends 'base.html.twig' %}

{% block title %}COREEGO | {{ user.pseudo }}{% endblock %}
{% block body %}

<section class="profil top_margin">
  <div class="header_forum container">
    <div class="sujet_head">
      <h3>{{ user.pseudo }}</h3>
      <p class="d-inline">
        <span class="badge bg-info text-white">ADMIN</span>
        {% if user.roles[0] != 'ROLE_ADMIN' %}
        <small>Inscrit depuis {{ user.createdAt | ago | slice(6)  }}</small>
        {% endif %}
        {% if ( is_granted('IS_AUTHENTICATED_FULLY') and user.id == app.user.id) %}
        <a class=" mt-3" href="{{ path('user_edit', {'pseudo' : user.pseudo } ) }}"><i class="far fa-edit text-black"></i>Editer</a>
        {% endif %}
      </p>
    </div>
    <div class="p-2 description mt-4">
      {{ user.description | raw }}
    </div>
  </div>
</section>

<div class="">
  <ul class="nav nav-pills tabs_user p-2" id="pills-tab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active text-white fw-bold btn-sm" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Posts | {{ places | length }} </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link text-white fw-bold btn-sm" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false"> Trophée | {{ likes | length }} / 16 </button>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active mt-3 p-4" id="home" role="tabpanel" aria-labelledby="home-tab">
    <table class="table table-responsive">
      <h3 class="mb-4">Ses derniers sujets</h3>
      {% for sujet in sujets %}
      <div class="forum_sujets mb-4 shadow" style="width: 600px; max-width: 100%">
          <div class="d-flex justify-content-between flex-wrap">
              <div class="sujet_head">
                  <h6>{{ sujet.title }}</h6>
                  <span><i class="fas fa-user"></i> {{ sujet.user.pseudo }}, {{ sujet.createdAt | ago }} </span>
              </div>
              <div class="d-flex">
                  <p class="badge badge-small bg-{{ sujet.categorie.color }} " style="height: 20px;">{{ sujet.categorie.categorie }}</p>
                  <p class="comment_count"><i class="fas fa-comments ms-3"></i> {{ sujet.sujetResponses | length }}</p>
              </div>
          </div>
          <a href="{{ path('sujet_view', {'id' : sujet.id, 'title' : sujet.title } ) }}"></a>
          {% if (is_granted('IS_AUTHENTICATED_FULLY') and sujet.user.id == app.user.id ) %}
          <a onclick="return confirm('Un post est une source d\'information important pour les utilisateurs, êtes vous sûr de vouloir supprimer ce post ?  ') " href="{{ path('deletesujet', {'id' : sujet.id} ) }}" style="position: relative; z-index: 100; text-align: right;"><i class="fas fa-trash-alt text-danger"></i></a>
          {% endif %}
      </div>
      {% endfor %}
      </table>
</div>


    <div class="tab-pane fade mt-3" id="profile" role="tabpanel" aria-labelledby="profile-tab">
      gr
    </div>
  </div>
</div>

{% block javascripts %}{% endblock %}

{% endblock %}
