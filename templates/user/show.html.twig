{% extends 'base.html.twig' %}

{% block title %}User{% endblock %}
{% block body %}

<section class="profil container pb-5">

  <div class="row align-items-center position-relative">
    <div class="col-md-5">
      <h5>{{ user.pseudo }}
        {% if user.pseudo == app.user.pseudo %}
        <a class="btn btn-success btn-sm" href="/user/{{ user.pseudo }}/edit"><i class="far fa-edit"></i></a>
        {% endif %}
      </h5>
      <div class="palmares border-bottom mb-2">
        {% if places|length < 29 %}
      <p><small>Voyaeur novice</small> <br> <i class="fas fa-star text-warning"></i></p>
        {% elseif places|length > 49 %}
        <p><small>Voyageur aquerie</small> <br> <i class="fas fa-star text-warning"></i><i class="fas fa-star text-warning"></i></p>

        {% elseif places|length > 299 %}
        <p><small>Voyageur expert</small> <br>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
          <i class="fas fa-star text-warning"></i>
        </p>
        {% endif %}
    </div>

      <p>
        {{ user.description | raw }}
      </p>
    </div>
  </div>
</section>

<div class="container">
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Lieux publiés - {{ places | length }} </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Lieux aimés - {{ likes | length }}  </button>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active mt-3" id="home" role="tabpanel" aria-labelledby="home-tab">
    {% if places|length > 0 %}
    <table class="table table-responsive">
      {% for place in places %}
      <tr class="align-midle">
        <td>
          <img src="{{ asset('./place/') }}{{ place.images[0].name }}" class="img-fuild mx-auto" width="100" alt=""><br>
          <a href="{{ path('carnet_de_route') }}?city={{ place.city.name }}" class="mt-2 d-block"> <i class="fas fa-map-marker-alt"></i>  {{ place.city.name }}</a>
          </td>
        <td>
         {{ place.title }}
        </td>
        <td>
          <a href=" {{ path('place_show', { 'id': place.id } )}} " class="btn btn-success btn-sm"><i class="fas fa-eye"></i></a>
          {% if place.user.id == app.user.id %}
          <a href=" {{ path('place_delete', {'id': place.id} ) }} " onclick="return confirm('Voulez vous supprimer cette place ?')" class="btn btn-danger btn-sm"><i class="fas fa-trash-alt"></i></a>
          {% endif %}
        </td>
      </tr>
        {% endfor %}
    </table>
      {% else %}
        <p> Aucune places publiées  </p>
      {% endif %}
    </div>
    <div class="tab-pane fade mt-3" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        {% if likes|length > 0 %}
      {% for like in likes %}
      <div class="card p-3 mb-3">
          <div class="row align-items-center">
            <div class="col-md-5 col-12">
              <img src="{{ asset('./place/') }}{{ like.place.images[0].name }}"  width="100"   alt="">
            </div>
            <div class="col-md-4 col-12">
              <p>{{ like.place.title }} <span class="fw-bold"> | {{ like.place.city.name }} </span> </p>
            </div>
            <div class="col-md-3 col-12">
              <a href="{{ path('place_show', { 'id': like.place.id } ) }}" class="btn btn-success btn-sm">Voir le lieu</a>
            </div>
          </div>
      </div>
      {% endfor %}
      {% else %}
        <p> Aucune places aimées  </p>
      {% endif %}

    </div>
  </div>
</div>

{% block javascripts %}{% endblock %}

{% endblock %}
