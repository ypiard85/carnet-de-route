{% extends 'base.html.twig' %}

{% block title %}User{% endblock %}
{% block body %}
<h1>User</h1>

<div class="form profil container border-bottom pb-5">
  <div class="row align-items-center">
    <div class="col-md-5">
      <h5>{{ user.pseudo }}</h5>
      <p>
        {{ user.description }}
      </p>
    </div>
  </div>

  {% if user.pseudo == app.user.pseudo %}
  <a class="btn btn-success" href="/user/{{ user.pseudo }}/edit">Editer votre description</a>
  {% endif %}
</div>

<div class="container">
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Lieux publiés - {{ places | length }} </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Lieux aimés - {{ likes | length }}  </button>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active mt-3" id="home" role="tabpanel" aria-labelledby="home-tab">
    {% if places|length > 0 %}
      {% for place in places %}
      <div class="card p-3 mb-3">
          <div class="row align-items-center">
            <div class="col-md-5 col-12">
              <img src="{{ asset('./place/') }}{{ place.images[0].name }} " width="100" height="100"  alt="">
            </div>
            <div class="col-md-4 col-12">
                <p>{{ place.title }} <span class="fw-bold"> | {{ place.city.name }} </span> </p>
            </div>
            <div class="col-md-3 col-12">
              <a href=" {{ path('place_show', { 'id': place.id } )}} " class="btn btn-success btn-sm">Voir le lieu</a>
              <a href=" {{ path('place_delete', {'id': place.id} ) }} " onclick="return confirm('Voulez vous supprimer cette place ?')" class="btn btn-danger btn-sm">Suprimer</a>
            </div>
          </div>
      </div>
      {% endfor %}
      {% else %}
        <p> Aucune places publiées  </p>
      {% endif %}
    </div>
    <div class="tab-pane fade mt-3" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        {% if likes|length > 0 %}
      {% for like in likes %}
      <div class="card p-3 mb-3">
          <div class="row align-items-center">
            <div class="col-md-5 col-12">
              <img src="{{ asset('./place/') }}{{ like.place.images[0].name }} " width="100" height="100"  alt="">
            </div>
            <div class="col-md-4 col-12">
              <p>{{ like.place.title }} <span class="fw-bold"> | {{ like.place.city.name }} </span> </p>
            </div>
            <div class="col-md-3 col-12">
              <a href="{{ path('place_show', { 'id': like.place.id } ) }}" class="btn btn-success btn-sm">Voir le lieu</a>
            </div>
          </div>
      </div>
      {% endfor %}
      {% else %}
        <p> Aucune places aimées  </p>
      {% endif %}

    </div>
  </div>
</div>


{% endblock %}
